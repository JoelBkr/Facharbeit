<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Link Manager</title>
    <style>
        #links-container {
            list-style: none;
            padding: 0;
        }

        .edit-buttons, .delete-buttons {
            display: none;
        }

        .link-item {
            margin-bottom: 10px;
        }

        .edit-buttons button, .delete-buttons button {
            cursor: pointer;
        }
    </style>
</head>
<body>

<div id="links-container">
    <!-- Links werden hier dynamisch eingefügt -->
</div>

<button onclick="openPopup()">+</button>

<!-- Popup für das Hinzufügen/Bearbeiten von Links -->
<div id="popup" style="display: none;">
    <label for="linkName">Anzeigename:</label>
    <input type="text" id="linkName">
    <br>
    <label for="linkURL">Link:</label>
    <input type="text" id="linkURL">
    <br>
    <button id="saveButton" onclick="saveLink()">Speichern</button>
    <button onclick="closePopup()">Abbrechen</button>
    <button id="deleteButton" onclick="deleteLink()" style="display: none;">Löschen</button>
</div>

<script>
    let links = getSavedLinks(); // Links aus den Cookies abrufen
    let editingIndex = null;

    function renderLinks() {
        const linksContainer = document.getElementById('links-container');
        linksContainer.innerHTML = '';

        links.forEach((link, index) => {
            const listItem = document.createElement('li');
            listItem.classList.add('link-item');

            const linkElement = document.createElement('a');
            linkElement.textContent = link.name;
            linkElement.href = link.url;
            linkElement.target = '_blank';

            const editButton = document.createElement('button');
            editButton.textContent = 'Bearbeiten';
            editButton.onclick = () => openEditPopup(index);

            listItem.appendChild(linkElement);
            listItem.appendChild(editButton);

            linksContainer.appendChild(listItem);
        });
    }

    function openPopup() {
        document.getElementById('popup').style.display = 'block';
        document.getElementById('linkName').value = '';
        document.getElementById('linkURL').value = '';
        document.getElementById('saveButton').onclick = saveLink;
        document.getElementById('deleteButton').style.display = 'none';
        editingIndex = null;
    }

    function closePopup() {
        document.getElementById('popup').style.display = 'none';
    }

    function saveLink() {
        const linkName = document.getElementById('linkName').value;
        const linkURL = document.getElementById('linkURL').value;

        if (linkName && linkURL) {
            const newLink = { name: linkName, url: linkURL };
            if (editingIndex !== null) {
                links[editingIndex] = newLink;
            } else {
                links.push(newLink);
            }
            saveLinksToCookies();
            renderLinks();
            closePopup();
        }
    }

    function openEditPopup(index) {
        openPopup();
        document.getElementById('linkName').value = links[index].name;
        document.getElementById('linkURL').value = links[index].url;
        document.getElementById('saveButton').onclick = () => saveLink();
        document.getElementById('deleteButton').style.display = 'block';
        editingIndex = index;
    }

    function deleteLink() {
        if (editingIndex !== null) {
            links.splice(editingIndex, 1);
            saveLinksToCookies();
            renderLinks();
            closePopup();
        }
    }

    function saveLinksToCookies() {
        // Hier könnten Sie eine fortgeschrittenere Logik für die Cookie-Speicherung verwenden
        document.cookie = 'links=' + JSON.stringify(links);
    }

    function getSavedLinks() {
        const cookies = document.cookie.split(';');
        const linksCookie = cookies.find(cookie => cookie.trim().startsWith('links='));
        return linksCookie ? JSON.parse(linksCookie.split('=')[1]) : [];
    }

    // Initial das Rendering der Links aufrufen
    renderLinks();
</script>

</body>
</html>
